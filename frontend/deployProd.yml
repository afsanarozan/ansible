---
  - name: 'Deploy to Production'
    hosts: prod-server
    vars_files:
      - vars.yml
    vars:
      - branch: "prod"

    tasks:
      - name: "Check connection to node"
        ping:
      
      # - name: Stop Cluster
      #   args:
      #     chdir: "{{dests}}/{{proj}}"
      #   command: docker-compose stop

      # - name: Remove Frontend Container
      #   command: docker rm frontend
      #   register: rm
      #   failed_when: rm.rc != 1 and rm.rc != 0
      
      # # - name: Remove Frontend Image
      # #   command: docker rmi {{hub}}/{{proj}}:{{branch}}

      # # # - name: Send docker-compose.yml to server
      # # #   copy:
      # # #     src: "{{dests}}/{{proj}}/{{dockercomposeProd}}"
      # # #     dest: "{{remote_file}}/{{dockercomposeProd}}"
      # # #     owner: "{{user}}"
      # # #     group: "{{user}}"
      # #     mode: "u+x,g+x"

      # - name: Run Docker Compose
      #   args:
      #     chdir: "{{dests}}/{{proj}}"
      #   command: docker-compose up -d

      # - name: push docker hub
      #   args:
      #     chdir: "{{dests}}/{{proj}}"
      #   command: docker push {{hub}}/{{proj}}:{{branch}}
          